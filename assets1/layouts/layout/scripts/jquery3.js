!function(i){"object"==typeof module&&module.exports?module.exports=i:i(Highcharts)}(function(i){!function(i){var t=i.noop,e=i.color,o=i.defaultOptions,l=i.each,r=i.extend,s=i.format,n=i.objectEach,a=i.pick,d=i.wrap,p=i.Chart,h=i.seriesTypes,c=h.pie,u=h.column,v=i.Tick,g=i.fireEvent,w=i.inArray,m=1;o.drilldown={activeAxisLabelStyle:{color:"#003399"},activeDataLabelStyle:{color:"#003399"},animation:{duration:500},drillUpButton:{position:{align:"right",x:10,y:10}}},r(o.lang,{drillUpText:"Back",position:"center"}),i.SVGRenderer.prototype.Element.prototype.fadeIn=function(i){this.attr({opacity:.1,visibility:"inherit"}).animate({opacity:a(this.newOpacity,1)},i||{duration:250})},p.prototype.addSeriesAsDrilldown=function(i,t){this.addSingleSeriesAsDrilldown(i,t),this.applyDrilldown()},p.prototype.addSingleSeriesAsDrilldown=function(o,s){var n,a,d,p,h=o.series,c=h.xAxis,u=h.yAxis,v=[],g=[];p={color:o.color||h.color},this.drilldownLevels||(this.drilldownLevels=[]),a=h.options._levelNumber||0,(d=this.drilldownLevels[this.drilldownLevels.length-1])&&d.levelNumber!==a&&(d=void 0),s=r(r({_ddSeriesId:m++},p),s),n=w(o,h.points),l(h.chart.series,function(i){i.xAxis!==c||i.isDrilling||(i.options._ddSeriesId=i.options._ddSeriesId||m++,i.options._colorIndex=i.userOptions._colorIndex,i.options._levelNumber=i.options._levelNumber||a,d?(v=d.levelSeries,g=d.levelSeriesOptions):(v.push(i),g.push(i.options)))}),o=r({levelNumber:a,seriesOptions:h.options,levelSeriesOptions:g,levelSeries:v,shapeArgs:o.shapeArgs,bBox:o.graphic?o.graphic.getBBox():{},color:o.isNull?new i.Color(e).setOpacity(0).get():e,lowerSeriesOptions:s,pointOptions:h.options.data[n],pointIndex:n,oldExtremes:{xMin:c&&c.userMin,xMax:c&&c.userMax,yMin:u&&u.userMin,yMax:u&&u.userMax}},p),this.drilldownLevels.push(o),c&&c.names&&(c.names.length=0),s=o.lowerSeries=this.addSeries(s,!1),s.options._levelNumber=a+1,c&&(c.oldPos=c.pos,c.userMin=c.userMax=null,u.userMin=u.userMax=null),h.type===s.type&&(s.animate=s.animateDrilldown||t,s.options.animation=!0)},p.prototype.applyDrilldown=function(){var i,t=this.drilldownLevels;t&&0<t.length&&(i=t[t.length-1].levelNumber,l(this.drilldownLevels,function(t){t.levelNumber===i&&l(t.levelSeries,function(t){t.options&&t.options._levelNumber===i&&t.remove(!1)})})),this.redraw(),this.showDrillUpButton()},p.prototype.getDrilldownBackText=function(){var i=this.drilldownLevels;return i&&0<i.length?(i=i[i.length-1],i.series=i.seriesOptions,s(this.options.lang.drillUpText,i)):void 0},p.prototype.showDrillUpButton=function(){var i,t,e=this,o=this.getDrilldownBackText(),l=e.options.drilldown.drillUpButton;this.drillUpButton?this.drillUpButton.attr({text:o}).align():(t=(i=l.theme)&&i.states,this.drillUpButton=this.renderer.button(o,null,null,function(){e.drillUp()},i,t&&t.hover,t&&t.select).addClass("highcharts-drillup-button").attr({align:l.position.align,zIndex:7}).add().align(l.position,!1,l.relativeTo||"plotBox"))},p.prototype.drillUp=function(){for(var i,t,e,o,r=this,s=r.drilldownLevels,n=s[s.length-1].levelNumber,a=s.length,d=r.series,p=function(i){var s;l(d,function(t){t.options._ddSeriesId===i._ddSeriesId&&(s=t)}),s=s||r.addSeries(i,!1),s.type===e.type&&s.animateDrillupTo&&(s.animate=s.animateDrillupTo),i===t.seriesOptions&&(o=s)};a--;)if(t=s[a],t.levelNumber===n){if(s.pop(),e=t.lowerSeries,!e.chart)for(i=d.length;i--;)if(d[i].options.id===t.lowerSeriesOptions.id&&d[i].options._levelNumber===n+1){e=d[i];break}e.xData=[],l(t.levelSeriesOptions,p),g(r,"drillup",{seriesOptions:t.seriesOptions}),o.type===e.type&&(o.drilldownLevel=t,o.options.animation=r.options.drilldown.animation,e.animateDrillupFrom&&e.chart&&e.animateDrillupFrom(t)),o.options._levelNumber=n,e.remove(!1),o.xAxis&&(i=t.oldExtremes,o.xAxis.setExtremes(i.xMin,i.xMax,!1),o.yAxis.setExtremes(i.yMin,i.yMax,!1))}g(r,"drillupall"),this.redraw(),0===this.drilldownLevels.length?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align(),this.ddDupes.length=[]},u.prototype.animateDrillupTo=function(i){if(!i){var e=this,o=e.drilldownLevel;l(this.points,function(i){var t=i.dataLabel;i.graphic&&i.graphic.hide(),t&&(t.hidden="hidden"===t.attr("visibility"),t.hidden||(t.hide(),i.connector&&i.connector.hide()))}),setTimeout(function(){e.points&&l(e.points,function(i,t){t=t===(o&&o.pointIndex)?"show":"fadeIn";var e="show"===t?!0:void 0,l=i.dataLabel;i.graphic&&i.graphic[t](e),l&&!l.hidden&&(l[t](e),i.connector)&&i.connector[t](e)})},Math.max(this.chart.options.drilldown.animation.duration-50,0)),this.animate=t}},u.prototype.animateDrilldown=function(i){var t,e=this,o=this.chart.drilldownLevels,s=this.chart.options.drilldown.animation,n=this.xAxis;i||(l(o,function(i){e.options._ddSeriesId===i.lowerSeriesOptions._ddSeriesId&&(t=i.shapeArgs,t.fill=i.color)}),t.x+=a(n.oldPos,n.pos)-n.pos,l(this.points,function(i){i.shapeArgs.fill=i.color,i.graphic&&i.graphic.attr(t).animate(r(i.shapeArgs,{fill:i.color||e.color}),s),i.dataLabel&&i.dataLabel.fadeIn(s)}),this.animate=null)},u.prototype.animateDrillupFrom=function(t){var e=this.chart.options.drilldown.animation,o=this.group,r=o!==this.chart.seriesGroup,s=this;l(s.trackerGroups,function(i){s[i]&&s[i].on("mouseover")}),r&&delete this.group,l(this.points,function(l){var s=l.graphic,n=t.shapeArgs,a=function(){s.destroy(),o&&r&&(o=o.destroy())};s&&(delete l.graphic,n.fill=t.color,e?s.animate(n,i.merge(e,{complete:a})):(s.attr(n),a()))})},c&&r(c.prototype,{animateDrillupTo:u.prototype.animateDrillupTo,animateDrillupFrom:u.prototype.animateDrillupFrom,animateDrilldown:function(t){var e=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],o=this.chart.options.drilldown.animation,r=e.shapeArgs,s=r.start,n=(r.end-s)/this.points.length;t||(l(this.points,function(t,l){var a=t.shapeArgs;r.fill=e.color,a.fill=t.color,t.graphic&&t.graphic.attr(i.merge(r,{start:s+l*n,end:s+(l+1)*n}))[o?"animate":"attr"](a,o)}),this.animate=null)}}),i.Point.prototype.doDrilldown=function(i,t,e){var o,l=this.series.chart,r=l.options.drilldown,s=(r.series||[]).length;for(l.ddDupes||(l.ddDupes=[]);s--&&!o;)r.series[s].id===this.drilldown&&-1===w(this.drilldown,l.ddDupes)&&(o=r.series[s],l.ddDupes.push(this.drilldown));g(l,"drilldown",{point:this,seriesOptions:o,category:t,originalEvent:e,points:void 0!==t&&this.series.xAxis.getDDPoints(t).slice(0)},function(t){var e=t.point.series&&t.point.series.chart,o=t.seriesOptions;e&&o&&(i?e.addSingleSeriesAsDrilldown(t.point,o):e.addSeriesAsDrilldown(t.point,o))})},i.Axis.prototype.drilldownCategory=function(i,t){n(this.getDDPoints(i),function(e){e&&e.series&&e.series.visible&&e.doDrilldown&&e.doDrilldown(!0,i,t)}),this.chart.applyDrilldown()},i.Axis.prototype.getDDPoints=function(i){var t=[];return l(this.series,function(e){var o,l=e.xData,r=e.points;for(o=0;o<l.length;o++)if(l[o]===i&&e.options.data[o]&&e.options.data[o].drilldown){t.push(r?r[o]:!0);break}}),t},v.prototype.drillable=function(){var t=this.pos,e=this.label,o=this.axis,l="xAxis"===o.coll&&o.getDDPoints,r=l&&o.getDDPoints(t);l&&(e&&r.length?(e.drillable=!0,e.basicStyles||(e.basicStyles=i.merge(e.styles)),e.addClass("highcharts-drilldown-axis-label").css(o.chart.options.drilldown.activeAxisLabelStyle).on("click",function(i){o.drilldownCategory(t,i)})):e&&e.drillable&&(e.styles={},e.css(e.basicStyles),e.on("click",null),e.removeClass("highcharts-drilldown-axis-label")))},d(v.prototype,"addLabel",function(i){i.call(this),this.drillable()}),d(i.Point.prototype,"init",function(t,e,o,l){var r=t.call(this,e,o,l);return l=(t=e.xAxis)&&t.ticks[l],r.drilldown&&i.addEvent(r,"click",function(i){e.xAxis&&!1===e.chart.options.drilldown.allowPointDrilldown?e.xAxis.drilldownCategory(r.x,i):r.doDrilldown(void 0,void 0,i)}),l&&l.drillable(),r}),d(i.Series.prototype,"drawDataLabels",function(i){var t=this.chart.options.drilldown.activeDataLabelStyle,e=this.chart.renderer;i.call(this),l(this.points,function(i){var o=i.options.dataLabels,l=a(i.dlOptions,o&&o.style,{});i.drilldown&&i.dataLabel&&("contrast"===t.color&&(l.color=e.getContrast(i.color||this.color)),o&&o.color&&(l.color=o.color),i.dataLabel.addClass("highcharts-drilldown-data-label"),i.dataLabel.css(t).css(l))},this)});var f=function(i,t,e){i[e?"addClass":"removeClass"]("highcharts-drilldown-point"),i.css({cursor:t})},x=function(i){i.call(this),l(this.points,function(i){i.drilldown&&i.graphic&&f(i.graphic,"pointer",!0)})},y=function(i,t){var e=i.apply(this,Array.prototype.slice.call(arguments,1));return this.drilldown&&this.series.halo&&"hover"===t?f(this.series.halo,"pointer",!0):this.series.halo&&f(this.series.halo,"auto",!1),e};n(h,function(i){d(i.prototype,"drawTracker",x),d(i.prototype.pointClass.prototype,"setState",y)})}(i)});